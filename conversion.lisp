;;;; conversion.lisp

(in-package #:cl-image2text)

; (define-conversion blocks (1 2)
;   ;; Numeration of cell pixels:
;   ;; 0
;   ;; 1
;   ((:mono #\Space ()) (:lw12 #\▄ (1))))

; (define-conversion blocks (2 4)
;   ;; Numeration of cell pixels:
;   ;; 0 1
;   ;; 2 3
;   ;; 4 5
;   ;; 6 7
;   ((:mono #\Space ())
;    (:qu1 #\▝ (1 3)) (:qu2 #\▗ (5 7)) (:qu3 #\▖ (4 6)) (:qu4 #\▘ (0 2)) 
;    (:qu13 #\▞ (1 3 4 6)) 
;    (:lw14 #\▂ (6 7)) (:lw12 #\▄ (4 5 6 7)) (:lw34 #\▆ (2 3 4 5 6 7)) 
;    (:lf12 #\▌ (0 2 4 6))))

; (define-conversion blocks (4 8)
;   ;; Numeration of cell pixels:
;   ;;  0  1  2  3
;   ;;  4  5  6  7
;   ;;  8  9 10 11
;   ;; 12 13 14 15
;   ;; 16 17 18 19
;   ;; 20 21 22 23
;   ;; 24 25 26 27
;   ;; 28 29 30 31
;   #.(let* ((qu1 `(2 3 6 7 10 11 14 15)) (qu2 `(18 19 22 23 26 27 30 31)) 
;            (qu3 `(16 17 20 21 24 25 28 29)) (qu4 `(0 1 4 5 8 9 12 13)) 
;            (qu13 `(,@qu1 ,@qu3)) 
;            (lw18 `(28 29 30 31)) (lw14 `(24 25 26 27 ,@lw18)) 
;            (lw38 `(20 21 22 23 ,@lw14)) (lw12 `(,@qu2 ,@qu3)) 
;            (lw58 `(12 13 14 15 ,@lw12)) (lw34 `(8 9 10 11 ,@lw58))
;            (lw78 `(4 5 6 7 ,@lw34))
;            (lf14 `(0 4 8 12 16 20 24 28)) (lf12 `(,@qu3 ,@qu4))
;            (lf34 `(,@lf12 2 6 10 14 18 22 26 30)))
;       `((:mono #\Space ())
;         (:qu1 #\▝ ,qu1) (:qu2 #\▗ ,qu2) (:qu3 #\▖ ,qu3) (:qu4 #\▘ ,qu4) 
;         (:qu13 #\▞ ,qu13) 
;         (:lw18 #\▁ ,lw18) (:lw14 #\▂ ,lw14) (:lw38 #\▃ ,lw38) (:lw12 #\▄ ,lw12) 
;         (:lw58 #\▅ ,lw58) (:lw34 #\▆ ,lw34) (:lw78 #\▇ ,lw78)
;         (:lf14 #\▎ ,lf14) (:lf12 #\▌ ,lf12) (:lf34 #\▊ ,lf34))))

;;; Reduced list of Braille patterns (72/128)
(define-conversion braille (2 4)
  ;; Numeration of cell pixels:
  ;; 0 1
  ;; 2 3
  ;; 4 5
  ;; 6 7
  ((:c-00 #\⠀ ())
   ;; 1 pixel: 8
   (:c-01 #\⠁ (0))
   (:c-02 #\⠂ (2))
   (:c-04 #\⠄ (4))
   (:c-08 #\⠈ (1))
   (:c-10 #\⠐ (3))
   (:c-20 #\⠠ (5))
   (:c-40 #\⡀ (6))
   (:c-7F #\⡿ (6 5 3 1 4 2 0))
   ;; 2 pixels: 28
   (:c-03 #\⠃ (2 0))
   (:c-05 #\⠅ (4 0))
   (:c-06 #\⠆ (4 2))
   (:c-09 #\⠉ (1 0))
   (:c-0A #\⠊ (1 2))
   (:c-0C #\⠌ (1 4))
   (:c-11 #\⠑ (3 0))
   (:c-12 #\⠒ (3 2))
   (:c-14 #\⠔ (3 4))
   (:c-18 #\⠘ (3 1))
   (:c-21 #\⠡ (5 0))
   (:c-22 #\⠢ (5 2))
   (:c-24 #\⠤ (5 4))
   (:c-28 #\⠨ (5 1))
   (:c-30 #\⠰ (5 3))
   (:c-41 #\⡁ (6 0))
   (:c-42 #\⡂ (6 2))
   (:c-44 #\⡄ (6 4))
   (:c-48 #\⡈ (6 1))
   (:c-50 #\⡐ (6 3))
   (:c-60 #\⡠ (6 5))
   (:c-3F #\⠿ (5 3 1 4 2 0))
   (:c-5F #\⡟ (6 3 1 4 2 0))
   (:c-6F #\⡯ (6 5 1 4 2 0))
   (:c-77 #\⡷ (6 5 3 4 2 0))
   (:c-7B #\⡻ (6 5 3 1 2 0))
   (:c-7D #\⡽ (6 5 3 1 4 0))
   (:c-7E #\⡾ (6 5 3 1 4 2))
   ;; 3 pixels: 56
   ; (:c-07 #\⠇ (4 2 0))
   ; (:c-0B #\⠋ (1 2 0))
   ; (:c-0D #\⠍ (1 4 0))
   ; (:c-0E #\⠎ (1 4 2))
   ; (:c-13 #\⠓ (3 2 0))
   ; (:c-15 #\⠕ (3 4 0))
   ; (:c-16 #\⠖ (3 4 2))
   ; (:c-19 #\⠙ (3 1 0))
   ; (:c-1A #\⠚ (3 1 2))
   ; (:c-1C #\⠜ (3 1 4))
   ; (:c-1F #\⠟ (3 1 4 2 0))
   ; (:c-23 #\⠣ (5 2 0))
   ; (:c-25 #\⠥ (5 4 0))
   ; (:c-26 #\⠦ (5 4 2))
   ; (:c-29 #\⠩ (5 1 0))
   ; (:c-2A #\⠪ (5 1 2))
   ; (:c-2C #\⠬ (5 1 4))
   ; (:c-2F #\⠯ (5 1 4 2 0))
   ; (:c-31 #\⠱ (5 3 0))
   ; (:c-32 #\⠲ (5 3 2))
   ; (:c-34 #\⠴ (5 3 4))
   ; (:c-38 #\⠸ (5 3 1))
   ; (:c-43 #\⡃ (6 2 0))
   ; (:c-45 #\⡅ (6 4 0))
   ; (:c-46 #\⡆ (6 4 2))
   ; (:c-49 #\⡉ (6 1 0))
   ; (:c-4A #\⡊ (6 1 2))
   ; (:c-4C #\⡌ (6 1 4))
   ; (:c-51 #\⡑ (6 3 0))
   ; (:c-52 #\⡒ (6 3 2))
   ; (:c-54 #\⡔ (6 3 4))
   ; (:c-58 #\⡘ (6 3 1))
   ; (:c-61 #\⡡ (6 5 0))
   ; (:c-62 #\⡢ (6 5 2))
   ; (:c-64 #\⡤ (6 5 4))
   ; (:c-37 #\⠷ (5 3 4 2 0))
   ; (:c-3B #\⠻ (5 3 1 2 0))
   ; (:c-3D #\⠽ (5 3 1 4 0))
   ; (:c-3E #\⠾ (5 3 1 4 2))
   ; (:c-4F #\⡏ (6 1 4 2 0))
   ; (:c-57 #\⡗ (6 3 4 2 0))
   ; (:c-5B #\⡛ (6 3 1 2 0))
   ; (:c-5D #\⡝ (6 3 1 4 0))
   ; (:c-5E #\⡞ (6 3 1 4 2))
   ; (:c-67 #\⡧ (6 5 4 2 0))
   ; (:c-68 #\⡨ (6 5 1))
   ; (:c-70 #\⡰ (6 5 3))
   ; (:c-6B #\⡫ (6 5 1 2 0))
   ; (:c-6D #\⡭ (6 5 1 4 0))
   ; (:c-6E #\⡮ (6 5 1 4 2))
   ; (:c-73 #\⡳ (6 5 3 2 0))
   ; (:c-75 #\⡵ (6 5 3 4 0))
   ; (:c-76 #\⡶ (6 5 3 4 2))
   ; (:c-79 #\⡹ (6 5 3 1 0))
   ; (:c-7A #\⡺ (6 5 3 1 2))
   ; (:c-7C #\⡼ (6 5 3 1 4))
   ;; 4 pixels: 35
   (:c-0F #\⠏ (1 4 2 0))
   (:c-17 #\⠗ (3 4 2 0))
   (:c-1B #\⠛ (3 1 2 0))
   (:c-1D #\⠝ (3 1 4 0))
   (:c-1E #\⠞ (3 1 4 2))
   (:c-27 #\⠧ (5 4 2 0))
   (:c-2B #\⠫ (5 1 2 0))
   (:c-2D #\⠭ (5 1 4 0))
   (:c-2E #\⠮ (5 1 4 2))
   (:c-33 #\⠳ (5 3 2 0))
   (:c-35 #\⠵ (5 3 4 0))
   (:c-36 #\⠶ (5 3 4 2))
   (:c-39 #\⠹ (5 3 1 0))
   (:c-3A #\⠺ (5 3 1 2))
   (:c-3C #\⠼ (5 3 1 4))
   (:c-47 #\⡇ (6 4 2 0))
   (:c-4B #\⡋ (6 1 2 0))
   (:c-4D #\⡍ (6 1 4 0))
   (:c-4E #\⡎ (6 1 4 2))
   (:c-53 #\⡓ (6 3 2 0))
   (:c-55 #\⡕ (6 3 4 0))
   (:c-56 #\⡖ (6 3 4 2))
   (:c-59 #\⡙ (6 3 1 0))
   (:c-5A #\⡚ (6 3 1 2))
   (:c-5C #\⡜ (6 3 1 4))
   (:c-63 #\⡣ (6 5 2 0))
   (:c-65 #\⡥ (6 5 4 0))
   (:c-66 #\⡦ (6 5 4 2))
   (:c-69 #\⡩ (6 5 1 0))
   (:c-6A #\⡪ (6 5 1 2))
   (:c-6C #\⡬ (6 5 1 4))
   (:c-71 #\⡱ (6 5 3 0))
   (:c-72 #\⡲ (6 5 3 2))
   (:c-74 #\⡴ (6 5 3 4))
   (:c-78 #\⡸ (6 5 3 1))
   ))

